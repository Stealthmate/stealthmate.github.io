---
layout: experience
title: 会計データ管理
toc: true
date: 2024-01-01
custom:
  period: 2024 年 〜 現在
  tags:
    - hledger
    - DX
    - 経理・会計
    - Rust
---

2024 年初め頃から、[hledger](https://hledger.org/) という OSS ツールを使い初め、自分自身の家計簿をそれで管理することにしました。

hledger とは一般に言う PTA (Plain Text Accounting) という会計手法を実現するためのツールで、わかりやすく言えば簿記試験でやるような仕訳をただの文字ファイル（適当な例え方をするなら YAML みたいな形式）に書き出して保存するためのものです。ファイルの中身を人間が書き、会計でよくやるような集計を CLI で簡単に行うことができます。例えば以下のようなことがワンコマンドでできます。

- 各種勘定科目の残高確認
- 特定の科目に対する取引履歴の出力
- 純利益の計算
- などなど

hledger を使い始めてから私生活の収支管理や目標設定など、経営っぽいこと（をするための分析や集計）がだいぶやりやすくなりました。それだけでなく、この方法を実務でも応用し、自分だけとはいえ日々の業務を効率化することに成功しました。また、 hledger で書き出すようなファイルをキレイにすべく [hlef](https://github.com/stealthmate/hlef) という formatter も (Rust で) 作りました。あまり売り込んではいませんが、自分のファイルには当たり前のように使っています。

### 背景

_本節はただの昔話です。_

元々 2015~2016 年頃から自分の収入と支出に関するデータをずっと記録しており、当時は Google Sheets を使っていました。その後 2018 年に大学に入学し、興味本位で「会計学入門」という教養科目を選択して履修することで[複式簿記](https://ja.wikipedia.org/wiki/%E8%A4%87%E5%BC%8F%E7%B0%BF%E8%A8%98)という概念に出会い、それを採用しました。それと同時に初めてのエンジニアアルバイトを始め、そこで Docker に慣れる機会があったので自分の PC で色んなものを稼働させる方法を覚えました。それができるなら Google Sheets ではなく PostgreSQL でもいいじゃん！と思い立ち、一時期これでもかと複雑な家計簿システムを組み立てようと思いきや、膨大な作業量に飽きて結局は諦め、また Google Sheets に戻りました。

しばらくその運用を続けていたのですが、もっと上手く貯金ができるようになりたいと思い、2024 年の初めに日商簿記の勉強を始めました。そこでは複式簿記というお作法だけではなく、そもそもにお金に対する考え方（特に工業簿記上での費用の扱い方など）をより深く学び、その知識で改めて自分のデータを分析してみようと思いました。そう考えたときに、やはり典型的な分析が楽にできるツールがあった方が良いよなと思い、調査の結果 hledger に出会い、採用しました。ちなみに簿記は 2 級まで取りました。

## この経験がどういう場面で活きるのか？

一見あまり応用先がないように見える話ですが、実は良い勉強になっています。

というのは、大きな会社で会計データを扱おうとすると、とある壁にぶち当たります。全社で一つだけの経理システムを使い、そこにすべてを保存しようとすると以下のいずれかの選択を迫られます。

1. 保存する属性をあらゆる部門のニーズに合わせ、結果洒落にならない規模の複雑さを持った（つまり膨大な技術負債になるような）システムを運用するか
2. 保存する属性を全社共通のものだけにして、結果各々の部門が独自で管理している情報の扱い方が完全にブラックボックスになるか

少なくとも私の経験上は大体この２つの戦いです。しかし hledger （みたいなもの）を使うことで、ここの中間を狙うことができ、各々の部門の独自ルールを各々に任せつつ、全社視点での分析もできるようになります。しかも、データは所詮ただの文字情報なので特定のベンダの技術に依存せずに運用できます。

細かいことを言うなら [hledger のタグの話](https://hledger.org/tags-tutorial.html)とか、ファイルを分割できる話とか、勘定科目を任意に設定できる話とかをすることになるのですが、そこは他のツールにも多分あると思います。実際に何かの会社のシステムを組むとなると、必ずしも hledger が最適な選択肢になるとは限らないでしょうけれど、ここで大事なのは具体的な技術の選択ではなく、**汎用的な技術を使うことで個々での自由や最適化と、組織全体の統制を両とこ取りできるという視点**です。それが、私がこの経験をしたおかげで得たものです。